{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TFT Team Compositions",
  "description": "Schema for TFT team composition data scraped from tactics.tools",
  "type": "object",
  "required": ["compositions", "timestamp", "patchVersion", "success"],
  "properties": {
    "compositions": {
      "type": "array",
      "description": "Array of team compositions",
      "items": {
        "$ref": "#/definitions/TeamComposition"
      }
    },
    "timestamp": {
      "type": "string",
      "description": "ISO timestamp of when the data was scraped",
      "format": "date-time"
    },
    "patchVersion": {
      "type": "string",
      "description": "TFT patch version for the data"
    },
    "success": {
      "type": "boolean",
      "description": "Whether the scraping was successful"
    },
    "errorMessage": {
      "type": "string",
      "description": "Error message if the scraping failed"
    }
  },
  "definitions": {
    "TeamComposition": {
      "type": "object",
      "required": ["id", "name", "type", "stats", "playstyle", "units", "traits", "lastUpdated"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the composition"
        },
        "name": {
          "type": "string",
          "description": "Name of the composition"
        },
        "type": {
          "type": "string",
          "description": "Type or primary trait of the composition"
        },
        "stats": {
          "$ref": "#/definitions/CompositionStats"
        },
        "playstyle": {
          "$ref": "#/definitions/CompositionPlaystyle"
        },
        "units": {
          "type": "array",
          "description": "Champions in the composition",
          "items": {
            "$ref": "#/definitions/ChampionInfo"
          }
        },
        "traits": {
          "type": "array",
          "description": "Traits in the composition",
          "items": {
            "$ref": "#/definitions/TraitInfo"
          }
        },
        "variants": {
          "type": "array",
          "description": "Variants of the composition",
          "items": {
            "$ref": "#/definitions/VariantInfo"
          }
        },
        "lastUpdated": {
          "type": "string",
          "description": "ISO timestamp of when the composition was last updated",
          "format": "date-time"
        },
        "teamBuilderUrl": {
          "type": "string",
          "description": "URL to the team builder for this composition"
        }
      }
    },
    "CompositionStats": {
      "type": "object",
      "required": ["playRate", "averagePlacement", "top4Percentage", "winPercentage"],
      "properties": {
        "playRate": {
          "type": "number",
          "description": "Play rate percentage of the composition"
        },
        "averagePlacement": {
          "type": "number",
          "description": "Average placement of the composition"
        },
        "top4Percentage": {
          "type": "number",
          "description": "Percentage of games where the composition placed in the top 4"
        },
        "winPercentage": {
          "type": "number",
          "description": "Win rate percentage of the composition"
        }
      }
    },
    "CompositionPlaystyle": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "description": "Type of playstyle (e.g., 'Level 6 Reroll', 'Fast Level 8')"
        },
        "description": {
          "type": "string",
          "description": "Additional description of the playstyle"
        }
      }
    },
    "ChampionInfo": {
      "type": "object",
      "required": ["name", "starLevel", "isCore", "items"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the champion"
        },
        "cost": {
          "type": "number",
          "description": "Cost of the champion (1-5)"
        },
        "starLevel": {
          "type": "number",
          "description": "Star level of the champion (1-3)",
          "enum": [1, 2, 3]
        },
        "isCore": {
          "type": "boolean",
          "description": "Whether the champion is a core unit in the composition"
        },
        "items": {
          "type": "array",
          "description": "Items for the champion",
          "items": {
            "$ref": "#/definitions/ItemInfo"
          }
        },
        "playRate": {
          "type": "number",
          "description": "Play rate percentage of the champion in this composition"
        },
        "averagePlacement": {
          "type": "number",
          "description": "Average placement when using this champion"
        }
      }
    },
    "ItemInfo": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the item"
        },
        "id": {
          "type": "string",
          "description": "Unique identifier for the item"
        },
        "playRate": {
          "type": "number",
          "description": "Play rate percentage of the item on this champion"
        },
        "averagePlacement": {
          "type": "number",
          "description": "Average placement when using this item"
        },
        "placementDelta": {
          "type": "number",
          "description": "Difference from champion's average placement"
        }
      }
    },
    "TraitInfo": {
      "type": "object",
      "required": ["name", "activeLevel", "totalLevel"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the trait"
        },
        "activeLevel": {
          "type": "number",
          "description": "Active level of the trait"
        },
        "totalLevel": {
          "type": "number",
          "description": "Total possible level of the trait"
        },
        "playRate": {
          "type": "number",
          "description": "Play rate percentage of the trait in this composition"
        },
        "averagePlacement": {
          "type": "number",
          "description": "Average placement when using this trait"
        }
      }
    },
    "VariantInfo": {
      "type": "object",
      "required": ["name", "units"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the variant"
        },
        "description": {
          "type": "string",
          "description": "Description of the variant"
        },
        "units": {
          "type": "array",
          "description": "Champions in the variant",
          "items": {
            "$ref": "#/definitions/ChampionInfo"
          }
        },
        "stats": {
          "$ref": "#/definitions/CompositionStats"
        }
      }
    }
  }
}
